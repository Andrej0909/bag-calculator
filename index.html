<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bag Calculator</title>
    <style>
        * {
        box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            margin: 20px;
            font-size: 25px;
        }
        table {
            width: 90vw;
            margin: 0 auto;
            table-layout: fixed;
            border-collapse: collapse;

        }
        th, td {
            border: 3px solid #ddd;
            height: 50px;
            width: 25%;
            padding: 0;
            text-align: center;
        }

        input {
               width: 100%;
               height: 100%;
               font-size: 25px;
               text-align: center;
               background-color: #e0f3ff;
               border: 3px solid #2b2b2b;
        }

        /* Style for the result number next to the title */
        #result {
            font-size: 30px;
            position: absolute;
            right: 40px;
            top: 60px;
            }

        button {
            font-size: 25px;
            cursor: pointer;
            height: 100%;  
            width: 20%;
            padding: 0;
        }

        .button2 {   
            height: 60px;  
            width: 30vw;
        }

    </style>
</head>
<body>
    <h1>Bag Calculator <span id="result"></span></h1>
    
 <!-- Első sora a táblázatnak -->
<table>
    <tr>
        <th> </th>
        <th>Percent</th>
        <th>PCS</th>
        <th>Kg</th>
    </tr>
<!-- Második sora a táblázatnak -->
    <tr>
        <td>Total</td>
        <th> </th>
        <td>
            <div style="display: flex; align-items: center; height: 100%; width: 100%;">
            <button type="button" onclick="adjustpcs(-1)">−</button>
            <input type="number" id="pcs" placeholder="Enter PCS" style="width: 80%; text-align: center; font-size: 25px;">
            <button type="button" onclick="adjustpcs(1)">+</button>
            </div>
        </td>

        <td>
        <input type="number" id="kg" placeholder="Enter Kg">
        </td>
    </tr>
 <!-- Harmadik sora a táblázatnak -->
    <tr>
        <td>Comp 1:</td>
        <td>
            <div style="display: flex; align-items: center; height: 100%; width: 100%;">
            <button type="button" onclick="adjustpercent1(-1)">−</button>
            <input type="number" id="percent1" placeholder="Enter Percent 1" min="0" max="100" value="30" style="width: 80%; text-align: center; font-size: 25px;">
            <button type="button" onclick="adjustpercent1(1)">+</button>
            </div>
        </td>

        <td>
            <div style="display: flex; align-items: center; height: 100%; width: 100%;">
            <button type="button" onclick="adjustpcs1(-1)">−</button>
            <input type="number" id="pcs1" placeholder="Enter PCS" style="width: 80%; text-align: center; font-size: 25px;">
            <button type="button" onclick="adjustpcs1(1)">+</button>
            </div>
        </td>

        <td id="cell34"></td>
    </tr>

<!-- Negyedik sora a táblázatnak -->
    <tr>
        <td>Comp 3:</td>
        <td id="cell42"></td>
        <td id="cell43"></td>
        <td id="cell44"></td>
    </tr>

<!-- Ötödik sora a táblázatnak -->
    <tr>
        <td>Comp 4:</td>

        <td>
            <div style="display: flex; align-items: center; height: 100%; width: 100%;">
            <button type="button" onclick="adjustpercent4(-1)">−</button> 
            <input type="number" id="percent4" placeholder="Enter Percent 4" min="0" max="100" value="30" style="width: 80%; text-align: center; font-size: 25px;">
            <button type="button" onclick="adjustpercent4(1)">+</button>
            </div>
        </td>

        <td>
            <div style="display: flex; align-items: center; height: 100%; width: 100%;">
            <button type="button" onclick="adjustpcs4(-1)">−</button>
            <input type="number" id="pcs4" placeholder="Enter PCS" style="width: 80%; text-align: center; font-size: 25px;">
            <button type="button" onclick="adjustpcs4(1)">+</button>
            </div>
        </td>

        <td id="cell54"></td>
    </tr>

<!-- Hatodik sora a táblázatnak -->
<tr>
    <td>Bulk:</td>
    <td id="cell62"></td>
    <td id="cell63"></td>
    <td id="cell64"></td>
</tr>

</table>
   
<div style="text-align: center; margin-top: 20px;">
    <button class="button2" type="button" onclick="setavst()">Avionexpress standard</button>
    <button class="button2" type="button" onclick="resetFields()">Reset</button>
    <button class="button2" type="button" onclick="setewst()">Eurowing standard</button>
</div>

<script>
    // Function to calculate results
    function calculateall() {
        // Get inputs
        var pcs = document.getElementById('pcs').value;
        var percent1 = document.getElementById('percent1').value;
        var percent4 = document.getElementById('percent4').value;
        var kg = document.getElementById('kg').value;

        // Validate inputs
        if (!pcs || !percent1 || !percent4 || !kg) {
            return;
        }

        // Calculations
        var result1 = (kg / pcs).toFixed(2); // 1 csomag súlyának számítása
        var pcs1 = Math.round((pcs / 100) * percent1); // Csomag száma a comp 1ben
        var pcs4 = Math.round((pcs / 100) * percent4); // Csomag száma a comp 4ben
        var percent3 = 100 - percent1 - percent4; // maradék csomag szazalek a comp 3ban
        var pcs3 = pcs - pcs1 - pcs4 ; // maradék csomag darab a comp 3ban
        var kg1 = Math.round(pcs1 * result1); // csomagok súlya a comp 1ben
        var kg4 = Math.round(pcs4 * result1); // csomagok súlya a comp 4ben
        var kg3 = kg - kg1 - kg4; // maradék csomag súly a comp 3ban


        // számított eredmények cellákhoz rendelése
        document.getElementById('result').innerHTML = "<strong>" + result1 + "</strong> kg/bag";
        document.getElementById('pcs1').value= pcs1;
        document.getElementById('cell34').textContent = kg1;
        document.getElementById('cell42').textContent = percent3;
        document.getElementById('cell43').textContent = pcs3;
        document.getElementById('cell44').textContent = kg3;
        document.getElementById('pcs4').value = pcs4;
        document.getElementById('cell54').textContent = kg4;
        }

    function calculatepcs1() {
        var pcs1 = parseInt(document.getElementById('pcs1').value);
        var pcs = document.getElementById('pcs').value;
        var percent1 = Math.round((pcs1 / pcs) * 100); 
        document.getElementById('percent1').value = percent1.toFixed(0);
        var pcs = document.getElementById('pcs').value;
        var kg = document.getElementById('kg').value;
        var result1 = (kg / pcs);
        var kg1 = Math.round(pcs1 * result1);
        document.getElementById('cell34').textContent = kg1;
        var percent4 = document.getElementById('percent4').value;
        var percent3 = 100 - percent1 - percent4;
        document.getElementById('cell42').textContent = percent3;
        var pcs4 = parseInt(document.getElementById('pcs4').value);
        var pcs3 = pcs - pcs1 - pcs4;
        document.getElementById('cell43').textContent = pcs3;
        var kg4 = Math.round(pcs4 * result1);
        var kg3 = kg - kg1 - kg4;
        document.getElementById('cell44').textContent = kg3;
        };

    function calculatepcs4() {
        var pcs4 = parseInt(document.getElementById('pcs4').value);
        var pcs = document.getElementById('pcs').value;
        var percent4 = Math.round((pcs4 / pcs) * 100); 
        document.getElementById('percent4').value = percent4.toFixed(0);
        var pcs = document.getElementById('pcs').value;
        var kg = document.getElementById('kg').value;
        var result1 = (kg / pcs);
        var kg4 = Math.round(pcs4 * result1);
        document.getElementById('cell54').textContent = kg4;
        var percent1 = document.getElementById('percent1').value;
        var percent3 = 100 - percent1 - percent4;
        document.getElementById('cell42').textContent = percent3;
        var pcs1 = parseInt(document.getElementById('pcs1').value);
        var pcs3 = pcs - pcs1 - pcs4;
        document.getElementById('cell43').textContent = pcs3;
        var kg1 = Math.round(pcs1 * result1);
        var kg3 = kg - kg1 - kg4;
        document.getElementById('cell44').textContent = kg3;
        };

    function adjustpcs(change) {
        const pcsInput = document.getElementById('pcs');
        let currentValue = parseInt(pcsInput.value) || 0;
        currentValue += change;
        if (currentValue < 0) currentValue = 0; // Prevent negative values
        pcsInput.value = currentValue;
        calculateall(); // Trigger recalculation
        }

    function resetFields() {
        // Clear pcs and kg fields
        document.getElementById('pcs').value = '';
        document.getElementById('kg').value = '';
        document.getElementById('pcs1').value = '';
        document.getElementById('pcs4').value = '';
        document.getElementById('percent1').value = 30;
        document.getElementById('percent4').value = 30;
        document.getElementById('cell34').textContent = '';
        document.getElementById('cell42').textContent = '';
        document.getElementById('cell43').textContent = '';
        document.getElementById('cell44').textContent = '';
        document.getElementById('cell54').textContent = '';
        document.getElementById('cell63').textContent = '';
        document.getElementById('cell64').textContent = '';
    }

    function setavst() {
        document.getElementById('percent1').value = 30;
        document.getElementById('percent4').value = 30;
        document.getElementById('cell63').textContent = '';
        document.getElementById('cell64').textContent = '';
        calculateall();
    }

    function setewst() {
        document.getElementById('percent1').value = '';
        document.getElementById('cell42').textContent = '';
        document.getElementById('percent4').value = '';
        var pcs = document.getElementById('pcs').value;
        var kg = document.getElementById('kg').value;
        var result1 = (kg / pcs);
        document.getElementById('result').innerHTML = "<strong>" + result1.toFixed(2) + "</strong> kg/bag";
        var maxpcs1= Math.floor(1500 / result1);
        var pcs1 = Math.min(pcs, maxpcs1);
        document.getElementById('pcs1').value = pcs1;
        var maxpcs34= Math.floor(1000 / result1);
        var pcs3 = Math.min(pcs - pcs1, maxpcs34);
        document.getElementById('cell43').textContent = pcs3;
        var kg3 = Math.round(pcs3 * result1);
        document.getElementById('cell44').textContent = kg3;
        var pcs4 = Math.min(pcs - pcs1 - pcs3, maxpcs34);
        document.getElementById('pcs4').value = pcs4;
        var kg4 = Math.round(pcs4 * result1);
        document.getElementById('cell54').textContent = kg4;
        var pcsb = pcs - pcs1 - pcs3 - pcs4;
        document.getElementById('cell63').textContent = pcsb;
        var kgb= Math.round(pcsb * result1)
        document.getElementById('cell64').textContent = kgb;
        var kg1 = kg - kgb - kg4 -kg3; // csomagok súlya a comp 1ben
        document.getElementById('cell34').textContent = kg1;
    }


    //A GOMBOKHOZ TARTOZÓ FÜGGVÉNYEK
    function adjustpercent1(change) {
        const percent1Input = document.getElementById('percent1');
        let currentValue = parseInt(percent1Input.value) || 0;
        currentValue += change;
        if (currentValue < 0) currentValue = 0; // Prevent negative values
        if (currentValue > 100) currentValue = 100; // Prevent values above 100
        percent1Input.value = currentValue;
        calculateall(); // Trigger recalculation
        }

    function adjustpcs1(change) {
        const pcs1Input = document.getElementById('pcs1');
        let currentValue = parseInt(pcs1Input.value) || 0;
        currentValue += change;
        if (currentValue < 0) currentValue = 0; // Prevent negative values
        pcs1Input.value = currentValue;
        calculatepcs1(); // Trigger recalculation
        }

    function adjustpercent4(change) {
        const percent4Input = document.getElementById('percent4');
        let currentValue = parseInt(percent4Input.value) || 0;
        currentValue += change;
        if (currentValue < 0) currentValue = 0; // Prevent negative values
        if (currentValue > 100) currentValue = 100; // Prevent values above 100
        percent4Input.value = currentValue;
        calculateall(); // Trigger recalculation
        }

    function adjustpcs4(change) {
        const pcs4Input = document.getElementById('pcs4');
        let currentValue = parseInt(pcs4Input.value) || 0;
        currentValue += change;
        if (currentValue < 0) currentValue = 0; // Prevent negative values
        pcs4Input.value = currentValue;
        calculatepcs4(); // Trigger recalculation
        }

    // Add event listeners to each input field to trigger calculation on change
    document.getElementById('pcs').addEventListener('input', calculateall);
    document.getElementById('percent1').addEventListener('input', calculateall);
    document.getElementById('percent4').addEventListener('input', calculateall);
    document.getElementById('kg').addEventListener('input', calculateall);

    // ha változtatjuk a pcs1 értékét akkor automatikusan számolja a comp1 és comp3 értékeket
    document.getElementById('pcs1').addEventListener('input', calculatepcs1);    

    // ha változtatjuk a pcs4 értékét akkor automatikusan számolja a comp4 és comp3 értékeket
    document.getElementById('pcs4').addEventListener('input', calculatepcs4);
         
  
    // In this code we check if the browser supports Service Workers
    async function registerServiceWorker() {
    if ("serviceWorker" in navigator) {
        try {
        const registration = await navigator.serviceWorker.register(
        "sw.js"
        );
        console.log(
        "Service Worker registered with scope:",
        registration.scope
        );
        } catch (error) {
        console.error("Service Worker registration failed:", error);
    }}}

    registerServiceWorker();
</script>
</body>
</html>
